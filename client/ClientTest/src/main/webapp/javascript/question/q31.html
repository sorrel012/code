<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/example.css">
    <style>
        .box {
            width: 120px;
            height: 120px;
            text-align: center;
        }

        table {
            border: 1px solid rgb(94, 93, 93);
            border-collapse: collapse;
            margin: 50px;
        }

        img {
            width: 110px;
            height: 110px;
        }
    </style>
</head>

<body>

    <table>
        <tr>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
        </tr>
        <tr>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
        </tr>
        <tr>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
        </tr>
        <tr>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
        </tr>
        <tr>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
            <td class="box"></td>
        </tr>s
    </table>

    <script>

        const box = document.querySelectorAll(".box");

        obj = null;
        compare = null;

        for (let i = 0; i < box.length; i++) {

            let n;

            box[i].onclick = function () {

                if (event.target.nodeName == 'TD') {
                    color(box[i])
                    if (n != 0) {
                        createImg(box[i]);
                    }
                }
            }
        }

        function createImg(box) {


            if (obj != null) {
                obj.remove();
            }
            
            const img = document.createElement('img');
            img.setAttribute('src', '../images/dog-foot.png');
            if (obj != img) {
                box.appendChild(img);
            }

            obj = img;
        }

        function color(box) {
            if (box.style.backgroundColor.substring(4, 7) == '') {
                box.setAttribute('style', 'background-color: rgb(255,255,255);')
            } else {
                if (box.style.backgroundColor.length >= 18) {
                    n = box.style.backgroundColor.substring(4, 7);
                } else {
                    n = box.style.backgroundColor.substring(4, 6);
                }

                if (n >= 10) {
                    n -= 10;
                } else {
                    n = 0;
                    box.setAttribute('disbled');
                }
                box.setAttribute('style', `background-color: rgb(${n},${n},${n});`)
            }
        }

    </script>

</body>

</html>